{% extends "Layout" %}
{% block main %}
{% comment %}
  ============================================================
  Home / Landing Page
  ============================================================
{% endcomment %}

<!-- Hero -->
<section class="hero text-center">
  <h1>Advisory AI Ideas</h1>
  <p>Capture, evaluate, and prioritize AI use cases across the organization.
     Browse curated prompts to accelerate your work with AI.</p>
  <div class="flex justify-center gap-md" style="margin-top:1.5rem">
    <a href="/ideas" class="btn btn-lg" style="background:#fff;color:var(--color-primary)">
      <i data-lucide="lightbulb" style="width:18px;height:18px"></i> Explore Ideas
    </a>
    <a href="/prompts" class="btn btn-lg btn-accent">
      <i data-lucide="book-open" style="width:18px;height:18px"></i> Prompt Library
    </a>
  </div>
</section>

<!-- Quick Stats -->
<section class="section">
  <div class="grid grid-4" id="homeStats">
    <div class="kpi-card animate-slide-up">
      <div class="kpi-value" id="statTotalIdeas">--</div>
      <div class="kpi-label">AI Ideas</div>
    </div>
    <div class="kpi-card animate-slide-up">
      <div class="kpi-value" id="statLikelyWins">--</div>
      <div class="kpi-label">Likely Wins</div>
    </div>
    <div class="kpi-card animate-slide-up">
      <div class="kpi-value" id="statTotalPrompts">--</div>
      <div class="kpi-label">Curated Prompts</div>
    </div>
    <div class="kpi-card animate-slide-up">
      <div class="kpi-value" id="statTotalCopies">--</div>
      <div class="kpi-label">Prompt Copies</div>
    </div>
  </div>
</section>

<!-- Feature Cards -->
<section class="section">
  <h2 class="section-title">Get Started</h2>
  <div class="grid grid-3">
    <!-- Ideas Pipeline -->
    <div class="card">
      <div class="card-body">
        <div style="font-size:2rem;margin-bottom:.75rem">
          <i data-lucide="lightbulb" style="width:36px;height:36px;color:var(--color-primary)"></i>
        </div>
        <h3 style="margin-bottom:.5rem">AI Ideas Pipeline</h3>
        <p class="text-sm text-muted" style="margin-bottom:1rem">
          Submit new AI use cases, assess their value and feasibility, and
          track them through the innovation pipeline.
        </p>
        <div class="flex gap-sm">
          <a href="/ideas/submit" class="btn btn-primary btn-sm">Submit Idea</a>
          <a href="/ideas" class="btn btn-secondary btn-sm">View Dashboard</a>
        </div>
      </div>
    </div>

    <!-- Pipeline Board -->
    <div class="card">
      <div class="card-body">
        <div style="font-size:2rem;margin-bottom:.75rem">
          <i data-lucide="kanban" style="width:36px;height:36px;color:var(--color-accent)"></i>
        </div>
        <h3 style="margin-bottom:.5rem">Pipeline Board</h3>
        <p class="text-sm text-muted" style="margin-bottom:1rem">
          Visualize the full innovation lifecycle from submission to scaling
          with a Kanban-style board.
        </p>
        <a href="/ideas/pipeline" class="btn btn-accent btn-sm">View Pipeline</a>
      </div>
    </div>

    <!-- Prompt Library -->
    <div class="card">
      <div class="card-body">
        <div style="font-size:2rem;margin-bottom:.75rem">
          <i data-lucide="book-open" style="width:36px;height:36px;color:var(--color-secondary)"></i>
        </div>
        <h3 style="margin-bottom:.5rem">Prompt Library</h3>
        <p class="text-sm text-muted" style="margin-bottom:1rem">
          Browse curated AI prompts for client deliverables, productivity,
          research, data analysis, and more.
        </p>
        <div class="flex gap-sm">
          <a href="/prompts/submit" class="btn btn-primary btn-sm">Submit Prompt</a>
          <a href="/prompts" class="btn btn-secondary btn-sm">Browse Library</a>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Recent Ideas (loaded by JS) -->
<section class="section">
  <div class="flex justify-between items-center mb-lg">
    <h2 class="section-title" style="margin-bottom:0">Recent Ideas</h2>
    <a href="/ideas" class="btn btn-secondary btn-sm">View All</a>
  </div>
  <div class="grid grid-3" id="recentIdeas">
    <div class="empty-state" style="grid-column:1/-1">
      <p>Loading recent ideas&hellip;</p>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', async function () {
  try {
    // Fetch stats
    const ideas = await AppApi.getIdeas();
    const prompts = await AppApi.getPrompts({ status: 'Approved' });

    document.getElementById('statTotalIdeas').textContent = ideas.length;
    document.getElementById('statLikelyWins').textContent =
      ideas.filter(function (i) { return i._assessment && i._assessment.cr7b4_Quadrant === 100000000; }).length;
    document.getElementById('statTotalPrompts').textContent = prompts.length;

    var totalCopies = prompts.reduce(function (sum, p) { return sum + (p.cr7b4_UsageCount || 0); }, 0);
    document.getElementById('statTotalCopies').textContent = totalCopies.toLocaleString();

    // Recent ideas
    var recent = ideas.slice(0, 6);
    var container = document.getElementById('recentIdeas');
    if (recent.length === 0) {
      container.innerHTML = '<div class="empty-state" style="grid-column:1/-1"><p>No ideas yet. Be the first to submit one!</p></div>';
      return;
    }
    container.innerHTML = recent.map(function (idea) {
      return AppUI.renderIdeaCard(idea);
    }).join('');
    lucide.createIcons();
  } catch (err) {
    console.error('Home page load error:', err);
  }
});
</script>
{% endblock %}
